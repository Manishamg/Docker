pipeline{
    agent any
    environment {
        DOCKERHUB_USERNAME = "manisha265"
        DOCKERHUB_PASSWORD = "Mmani@265"
        }
    stages{
        stage ("httpd image pull"){
            steps{
            sh 'docker run -d --name image1 nginx:latest'
            }
        }
        stage ('docker images'){
            steps{
                sh 'docker images'
            }
        }
        stage('Pushing image to Docker-Hub') {
            steps {
                script {
                    sh "docker exec login -u ${DOCKERHUB_USERNAME} -p ${DOCKERHUB_PASSWORD} "
                    sh "docker exec tag image1 manisha265/docker:latest"
                    sh "docker exec push manisha265/docker:latest"
                }
    }}}
post{
    failure{
     sh 'docker rm -f image1'
}}
}
